import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.D6whbu08.js";import{I as x}from"./iconify.BWf9v2dp.js";import{u as m}from"./index.CTdVSFIz.js";import{e as p,f as h,b,o as k,d as v}from"./announcement.BMvckTqa.js";import{t as a}from"./index.DUNEl5hD.js";function g(){const e=n.useRef(void 0);return n.useCallback(t=>{e.current!==void 0&&clearTimeout(e.current),e.current=t??void 0},[])}const j=1e3,u={info:{color:"#3b82f6",icon:"ri:information-line"},warning:{color:"#eab308",icon:"ri:alert-line"},success:{color:"#22c55e",icon:"ri:checkbox-circle-line"},important:{color:"#ef4444",icon:"ri:error-warning-line"}};function y(e){if(e.color)return e.color;const t=e.type??"info";return u[t]?.color??u.info.color}function w(e){const t=e.type??"info";return u[t]?.icon??u.info.icon}function E({announcement:e}){const t=y(e),s=w(e);return r.jsxs("div",{className:"flex w-full flex-col gap-2 border-l-4 pl-3",style:{borderLeftColor:t},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(x,{icon:s,className:"h-4 w-4 shrink-0 opacity-70"}),r.jsx("span",{className:"font-semibold text-sm",children:e.title})]}),r.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:e.content}),e.link&&r.jsxs("a",{href:e.link.url,target:e.link.external?"_blank":void 0,rel:e.link.external?"noopener noreferrer":void 0,className:"inline-flex items-center gap-1 text-primary text-sm hover:underline",children:[e.link.text??"Learn more",e.link.external&&r.jsx(x,{icon:"ri:external-link-line",className:"h-3 w-3"})]})]})}function A({announcement:e,toastId:t}){const[s,i]=n.useState(!1),c=g(),o=()=>{i(!0),c(setTimeout(()=>v(e.id),j))},l=()=>{i(!1)};return r.jsxs("output",{className:`block w-full min-w-50 rounded-lg border border-border/50 bg-card/95 p-4 shadow-lg backdrop-blur-md transition-all duration-200 ${s?"scale-[1.02] shadow-xl":""}`,onMouseEnter:o,onMouseLeave:l,children:[r.jsx(E,{announcement:e}),r.jsxs("div",{className:"mt-3 flex items-center justify-between border-border/50 border-t pt-2 text-muted-foreground text-xs",children:[r.jsx("button",{onClick:k,className:"text-primary hover:underline",type:"button",children:"View all"}),r.jsx("button",{onClick:()=>a.dismiss(t),className:"opacity-70 hover:opacity-100",type:"button",children:"Dismiss"})]})]})}function S(){const e=m(p),t=m(h),s=m(b),i=n.useRef(new Set),c=n.useRef([]);return n.useEffect(()=>{s&&a.dismiss()},[s]),n.useEffect(()=>{if(e){for(const o of t){if(i.current.has(o.id))continue;i.current.add(o.id);const l=setTimeout(()=>{a.custom(d=>r.jsx(A,{announcement:o,toastId:d}),{id:o.id,duration:5e3})},500+t.indexOf(o)*200);c.current.push(l)}return()=>{c.current.forEach(clearTimeout),c.current=[]}}},[e,t]),n.useEffect(()=>{if(!e)return;const o=d=>{const f=document.querySelector("[data-sonner-toaster]");f&&!f.contains(d.target)&&a.dismiss()},l=setTimeout(()=>{document.addEventListener("click",o)},100);return()=>{clearTimeout(l),document.removeEventListener("click",o)}},[e]),null}export{S as A,w as a,y as g};
