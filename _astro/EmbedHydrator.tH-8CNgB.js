import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{E as Lt,a as kt}from"./ErrorBoundary.Dn7WU8Pf.js";import{r as p,a as $t,R as Pe}from"./index.D6whbu08.js";import{r as At}from"./index.Bn74zGeF.js";import{u as Vt}from"./useIsDarkTheme.CmykjYXb.js";import{a as W}from"./utils.BpMRZbEX.js";import{s as qe,a as et,b as je,c as N,d as Mt,e as Ft,f as Pt,g as I,h as re,i as qt,j as we,k as O,l as ye,m as tt,n as X,o as Ut,p as Bt,q as Wt,r as zt}from"./_slug_.6ad6a90c.DDtw5Tlp.js";import"./index.02QQZwjl.js";import"./index.TWhk7goS.js";import"./_commonjsHelpers.CqkleIqs.js";import"./index.BFlOlsrl.js";const Ht=()=>t.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:qe.verified,children:t.jsx("g",{children:t.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Gt=()=>t.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:qe.verified,children:t.jsxs("g",{children:[t.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[t.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),t.jsx("stop",{offset:".539",stopColor:"#cd8105"}),t.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),t.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),t.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),t.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[t.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),t.jsx("stop",{offset:".406",stopColor:"#e2b719"}),t.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),t.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[t.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),t.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),t.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Kt=()=>t.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:qe.verified,children:t.jsx("g",{children:t.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})}),Ue=({className:e,children:s})=>t.jsx("div",{className:W("react-tweet-theme",et.root,e),children:t.jsx("article",{className:et.article,children:s})}),pt=e=>t.jsx("img",{...e}),xt=({user:e,className:s})=>{const n=e.verified||e.is_blue_verified||e.verified_type;let r=t.jsx(Ht,{}),a=je.verifiedBlue;if(n)switch(e.is_blue_verified||(a=je.verifiedOld),e.verified_type){case"Government":r=t.jsx(Kt,{}),a=je.verifiedGovernment;break;case"Business":r=t.jsx(Gt,{}),a=null;break}return n?t.jsx("div",{className:W(s,a),children:r}):null},Xt=({tweet:e,components:s})=>{var n;const r=(n=s?.AvatarImg)!=null?n:pt,{user:a}=e;return t.jsxs("div",{className:N.header,children:[t.jsxs("a",{href:e.url,className:N.avatar,target:"_blank",rel:"noopener noreferrer",children:[t.jsx("div",{className:W(N.avatarOverflow,a.profile_image_shape==="Square"&&N.avatarSquare),children:t.jsx(r,{src:a.profile_image_url_https,alt:a.name,width:48,height:48})}),t.jsx("div",{className:N.avatarOverflow,children:t.jsx("div",{className:N.avatarShadow})})]}),t.jsxs("div",{className:N.author,children:[t.jsxs("a",{href:e.url,className:N.authorLink,target:"_blank",rel:"noopener noreferrer",children:[t.jsx("div",{className:N.authorLinkText,children:t.jsx("span",{title:a.name,children:a.name})}),t.jsx(xt,{user:a,className:N.authorVerified})]}),t.jsxs("div",{className:N.authorMeta,children:[t.jsx("a",{href:e.url,className:N.username,target:"_blank",rel:"noopener noreferrer",children:t.jsxs("span",{title:`@${a.screen_name}`,children:["@",a.screen_name]})}),t.jsxs("div",{className:N.authorFollow,children:[t.jsx("span",{className:N.separator,children:"·"}),t.jsx("a",{href:a.follow_url,className:N.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),t.jsx("a",{href:e.url,className:N.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:t.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:N.twitterIcon,children:t.jsx("g",{children:t.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},Qt=({tweet:e})=>t.jsxs("a",{href:e.in_reply_to_url,className:Mt.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",e.in_reply_to_screen_name]}),Jt=({href:e,children:s})=>t.jsx("a",{href:e,className:Ft.root,target:"_blank",rel:"noopener noreferrer nofollow",children:s}),Yt=({tweet:e})=>t.jsx("p",{className:Pt.root,lang:e.lang,dir:"auto",children:e.entities.map((s,n)=>{switch(s.type){case"hashtag":case"mention":case"url":case"symbol":return t.jsx(Jt,{href:s.href,children:s.text},n);case"media":return;default:return t.jsx("span",{dangerouslySetInnerHTML:{__html:s.text}},n)}})}),st=e=>`https://x.com/${e.user.screen_name}/status/${e.id_str}`,gt=e=>`https://x.com/${typeof e=="string"?e:e.user.screen_name}`,Zt=e=>`https://x.com/intent/like?tweet_id=${e.id_str}`,es=e=>`https://x.com/intent/tweet?in_reply_to=${e.id_str}`,ts=e=>`https://x.com/intent/follow?screen_name=${e.user.screen_name}`,ss=e=>`https://x.com/hashtag/${e.text}`,ns=e=>`https://x.com/search?q=%24${e.text}`,rs=e=>`https://x.com/${e.in_reply_to_screen_name}/status/${e.in_reply_to_status_id_str}`,vt=(e,s)=>{const n=new URL(e.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",s),n.toString()):e.media_url_https},as=e=>{const{variants:s}=e.video_info;return s.filter(r=>r.content_type==="video/mp4").sort((r,a)=>{var o,i;return((o=a.bitrate)!=null?o:0)-((i=r.bitrate)!=null?i:0)})},is=e=>{const s=as(e);return s.length>1?s[1]:s[0]},Oe=e=>e>999999?`${(e/1e6).toFixed(1)}M`:e>999?`${(e/1e3).toFixed(1)}K`:e.toString();function nt(e){const s=Array.from(e.text),n=[{indices:e.display_text_range,type:"text"}];return ce(n,"hashtag",e.entities.hashtags),ce(n,"mention",e.entities.user_mentions),ce(n,"url",e.entities.urls),ce(n,"symbol",e.entities.symbols),e.entities.media&&ce(n,"media",e.entities.media),os(e,n),n.map(r=>{const a=s.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:ss(r),text:a});case"mention":return Object.assign(r,{href:gt(r.screen_name),text:a});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:ns(r),text:a});default:return Object.assign(r,{text:a})}})}function ce(e,s,n){for(const r of n)for(const[a,o]of e.entries()){if(o.indices[0]>r.indices[0]||o.indices[1]<r.indices[1])continue;const i=[{...r,type:s}];o.indices[0]<r.indices[0]&&i.unshift({indices:[o.indices[0],r.indices[0]],type:"text"}),o.indices[1]>r.indices[1]&&i.push({indices:[r.indices[1],o.indices[1]],type:"text"}),e.splice(a,1,...i);break}}function os(e,s){e.entities.media&&e.entities.media[0].indices[0]<e.display_text_range[1]&&(e.display_text_range[1]=e.entities.media[0].indices[0]);const n=s.at(-1);n&&n.indices[1]>e.display_text_range[1]&&(n.indices[1]=e.display_text_range[1])}const cs=e=>({...e,url:st(e),user:{...e.user,url:gt(e),follow_url:ts(e)},like_url:Zt(e),reply_url:es(e),in_reply_to_url:e.in_reply_to_screen_name?rs(e):void 0,entities:nt(e),quoted_tweet:e.quoted_tweet?{...e.quoted_tweet,url:st(e.quoted_tweet),entities:nt(e.quoted_tweet)}:void 0}),ls=({tweet:e,media:s})=>{const[n,r]=p.useState(!0),[a,o]=p.useState(!1),[i,c]=p.useState(!1),f=is(s);let h=0;return t.jsxs(t.Fragment,{children:[t.jsx("video",{className:I.image,poster:vt(s,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{h&&window.clearTimeout(h),a||o(!0),i&&c(!1)},onPause:()=>{h&&window.clearTimeout(h),h=window.setTimeout(()=>{a&&o(!1),h=0},100)},onEnded:()=>{c(!0)},children:t.jsx("source",{src:f.url,type:f.content_type})}),n&&t.jsx("button",{type:"button",className:re.videoButton,"aria-label":"View video on X",onClick:j=>{const d=j.currentTarget.previousSibling;j.preventDefault(),r(!1),d.load(),d.play().then(()=>{o(!0),d.focus()}).catch(m=>{console.error("Error playing video:",m),r(!0),o(!1)})},children:t.jsx("svg",{viewBox:"0 0 24 24",className:re.videoButtonIcon,"aria-hidden":"true",children:t.jsx("g",{children:t.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!a&&!i&&t.jsx("div",{className:re.watchOnTwitter,children:t.jsx("a",{href:e.url,className:re.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),i&&t.jsx("a",{href:e.url,className:W(re.anchor,re.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},ds=e=>t.jsx("img",{...e}),rt=(e,s)=>{let n=56.25;return s===1&&(n=100/e.original_info.width*e.original_info.height),s===2&&(n=n*2),{width:e.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},_t=({tweet:e,components:s,quoted:n})=>{var r,a,o;const i=(o=(r=e.mediaDetails)==null?void 0:r.length)!=null?o:0;var c;const f=(c=s?.MediaImg)!=null?c:ds;return t.jsx("div",{className:W(I.root,!n&&I.rounded),children:t.jsx("div",{className:W(I.mediaWrapper,i>1&&I.grid2Columns,i===3&&I.grid3,i>4&&I.grid2x2),children:(a=e.mediaDetails)==null?void 0:a.map(h=>t.jsx(p.Fragment,{children:h.type==="photo"?t.jsxs("a",{href:e.url,className:W(I.mediaContainer,I.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[t.jsx("div",{className:I.skeleton,style:rt(h,i)}),t.jsx(f,{src:vt(h,"small"),alt:h.ext_alt_text||"Image",className:I.image,draggable:!0})]},h.media_url_https):t.jsxs("div",{className:I.mediaContainer,children:[t.jsx("div",{className:I.skeleton,style:rt(h,i)}),t.jsx(ls,{tweet:e,media:h})]},h.media_url_https)},h.media_url_https))})})},us={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},fs=new Intl.DateTimeFormat("en-US",us),hs=e=>{const s={};for(const n of e)s[n.type]=n.value;return s},ms=e=>{const s=hs(fs.formatToParts(e)),n=`${s.hour}:${s.minute} ${s.dayPeriod}`,r=`${s.month} ${s.day}, ${s.year}`;return`${n} · ${r}`},ps=({tweet:e})=>{const s=new Date(e.created_at),n=ms(s);return t.jsx("a",{className:qt.root,href:e.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:t.jsx("time",{dateTime:s.toISOString(),children:n})})},xs=({tweet:e})=>t.jsxs("div",{className:we.info,children:[t.jsx(ps,{tweet:e}),t.jsx("a",{className:we.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:t.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:we.infoIcon,children:t.jsx("g",{children:t.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),gs=({tweet:e})=>{const[s,n]=p.useState(!1),r=()=>{navigator.clipboard.writeText(e.url),n(!0)};return p.useEffect(()=>{if(s){const a=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(a)}},[s]),t.jsxs("button",{type:"button",className:O.copy,"aria-label":"Copy link",onClick:r,children:[t.jsx("div",{className:O.copyIconWrapper,children:s?t.jsx("svg",{viewBox:"0 0 24 24",className:O.copyIcon,"aria-hidden":"true",children:t.jsx("g",{children:t.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):t.jsx("svg",{viewBox:"0 0 24 24",className:O.copyIcon,"aria-hidden":"true",children:t.jsx("g",{children:t.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),t.jsx("span",{className:O.copyText,children:s?"Copied!":"Copy link"})]})},vs=({tweet:e})=>{const s=Oe(e.favorite_count);return t.jsxs("div",{className:O.actions,children:[t.jsxs("a",{className:O.like,href:e.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${s} likes`,children:[t.jsx("div",{className:O.likeIconWrapper,children:t.jsx("svg",{viewBox:"0 0 24 24",className:O.likeIcon,"aria-hidden":"true",children:t.jsx("g",{children:t.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),t.jsx("span",{className:O.likeCount,children:s})]}),t.jsxs("a",{className:O.reply,href:e.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[t.jsx("div",{className:O.replyIconWrapper,children:t.jsx("svg",{viewBox:"0 0 24 24",className:O.replyIcon,"aria-hidden":"true",children:t.jsx("g",{children:t.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),t.jsx("span",{className:O.replyText,children:"Reply"})]}),t.jsx(gs,{tweet:e})]})},_s=({tweet:e})=>t.jsx("div",{className:ye.replies,children:t.jsx("a",{className:ye.link,href:e.url,target:"_blank",rel:"noopener noreferrer",children:t.jsx("span",{className:ye.text,children:e.conversation_count===0?"Read more on X":e.conversation_count===1?`Read ${Oe(e.conversation_count)} reply`:`Read ${Oe(e.conversation_count)} replies`})})}),js=({tweet:e,children:s})=>t.jsx("div",{className:tt.root,onClick:n=>{n.preventDefault(),window.open(e.url,"_blank")},children:t.jsx("article",{className:tt.article,children:s})}),ws=({tweet:e})=>{const{user:s}=e;return t.jsxs("div",{className:X.header,children:[t.jsx("a",{href:e.url,className:X.avatar,target:"_blank",rel:"noopener noreferrer",children:t.jsx("div",{className:W(X.avatarOverflow,s.profile_image_shape==="Square"&&X.avatarSquare),children:t.jsx(pt,{src:s.profile_image_url_https,alt:s.name,width:20,height:20})})}),t.jsxs("div",{className:X.author,children:[t.jsx("div",{className:X.authorText,children:t.jsx("span",{title:s.name,children:s.name})}),t.jsx(xt,{user:s}),t.jsx("div",{className:X.username,children:t.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})})]})]})},ys=({tweet:e})=>t.jsx("p",{className:Ut.root,lang:e.lang,dir:"auto",children:e.entities.map((s,n)=>t.jsx("span",{dangerouslySetInnerHTML:{__html:s.text}},n))}),bs=({tweet:e})=>{var s;return t.jsxs(js,{tweet:e,children:[t.jsx(ws,{tweet:e}),t.jsx(ys,{tweet:e}),(s=e.mediaDetails)!=null&&s.length?t.jsx(_t,{quoted:!0,tweet:e}):null]})},Es=({tweet:e,components:s})=>{var n;const r=p.useMemo(()=>cs(e),[e]);return t.jsxs(Ue,{children:[t.jsx(Xt,{tweet:r,components:s}),r.in_reply_to_status_id_str&&t.jsx(Qt,{tweet:r}),t.jsx(Yt,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?t.jsx(_t,{tweet:r,components:s}):null,r.quoted_tweet&&t.jsx(bs,{tweet:r.quoted_tweet}),t.jsx(xs,{tweet:r}),t.jsx(vs,{tweet:r}),t.jsx(_s,{tweet:r})]})},Ss=e=>t.jsx(Ue,{children:t.jsxs("div",{className:Bt.root,children:[t.jsx("h3",{children:"Tweet not found"}),t.jsx("p",{children:"The embedded tweet could not be found…"})]})}),me=({style:e})=>t.jsx("span",{className:Wt.skeleton,style:e}),Ts=()=>t.jsxs(Ue,{className:zt.root,children:[t.jsx(me,{style:{height:"3rem",marginBottom:"0.75rem"}}),t.jsx(me,{style:{height:"6rem",margin:"0.5rem 0"}}),t.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),t.jsx(me,{style:{height:"2rem"}}),t.jsx(me,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var be={exports:{}},Ee={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at;function Ns(){if(at)return Ee;at=1;var e=$t();function s(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var n=typeof Object.is=="function"?Object.is:s,r=e.useState,a=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function c(d,m){var g=m(),E=r({inst:{value:g,getSnapshot:m}}),y=E[0].inst,D=E[1];return o(function(){y.value=g,y.getSnapshot=m,f(y)&&D({inst:y})},[d,g,m]),a(function(){return f(y)&&D({inst:y}),d(function(){f(y)&&D({inst:y})})},[d]),i(g),g}function f(d){var m=d.getSnapshot;d=d.value;try{var g=m();return!n(d,g)}catch{return!0}}function h(d,m){return m()}var j=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Ee.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:j,Ee}var it;function Rs(){return it||(it=1,be.exports=Ns()),be.exports}var ot=Rs();const jt=0,wt=1,yt=2,ct=3;var lt=Object.prototype.hasOwnProperty;function Ie(e,s){var n,r;if(e===s)return!0;if(e&&s&&(n=e.constructor)===s.constructor){if(n===Date)return e.getTime()===s.getTime();if(n===RegExp)return e.toString()===s.toString();if(n===Array){if((r=e.length)===s.length)for(;r--&&Ie(e[r],s[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(lt.call(e,n)&&++r&&!lt.call(s,n)||!(n in s)||!Ie(e[n],s[n]))return!1;return Object.keys(s).length===r}}return e!==e&&s!==s}const U=new WeakMap,B=()=>{},R=B(),Le=Object,u=e=>e===R,F=e=>typeof e=="function",z=(e,s)=>({...e,...s}),bt=e=>F(e.then),Se={},pe={},Be="undefined",le=typeof window!=Be,ke=typeof document!=Be,Cs=le&&"Deno"in window,Ds=()=>le&&typeof window.requestAnimationFrame!=Be,Et=(e,s)=>{const n=U.get(e);return[()=>!u(s)&&e.get(s)||Se,r=>{if(!u(s)){const a=e.get(s);s in pe||(pe[s]=a),n[5](s,z(a,r),a||Se)}},n[6],()=>!u(s)&&s in pe?pe[s]:!u(s)&&e.get(s)||Se]};let $e=!0;const Os=()=>$e,[Ae,Ve]=le&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[B,B],Is=()=>{const e=ke&&document.visibilityState;return u(e)||e!=="hidden"},Ls=e=>(ke&&document.addEventListener("visibilitychange",e),Ae("focus",e),()=>{ke&&document.removeEventListener("visibilitychange",e),Ve("focus",e)}),ks=e=>{const s=()=>{$e=!0,e()},n=()=>{$e=!1};return Ae("online",s),Ae("offline",n),()=>{Ve("online",s),Ve("offline",n)}},$s={isOnline:Os,isVisible:Is},As={initFocus:Ls,initReconnect:ks},dt=!Pe.useId,ae=!le||Cs,Vs=e=>Ds()?window.requestAnimationFrame(e):setTimeout(e,1),Te=ae?p.useEffect:p.useLayoutEffect,Ne=typeof navigator<"u"&&navigator.connection,ut=!ae&&Ne&&(["slow-2g","2g"].includes(Ne.effectiveType)||Ne.saveData),xe=new WeakMap,Ms=e=>Le.prototype.toString.call(e),Re=(e,s)=>e===`[object ${s}]`;let Fs=0;const Me=e=>{const s=typeof e,n=Ms(e),r=Re(n,"Date"),a=Re(n,"RegExp"),o=Re(n,"Object");let i,c;if(Le(e)===e&&!r&&!a){if(i=xe.get(e),i)return i;if(i=++Fs+"~",xe.set(e,i),Array.isArray(e)){for(i="@",c=0;c<e.length;c++)i+=Me(e[c])+",";xe.set(e,i)}if(o){i="#";const f=Le.keys(e).sort();for(;!u(c=f.pop());)u(e[c])||(i+=c+":"+Me(e[c])+",");xe.set(e,i)}}else i=r?e.toJSON():s=="symbol"?e.toString():s=="string"?JSON.stringify(e):""+e;return i},We=e=>{if(F(e))try{e=e()}catch{e=""}const s=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Me(e):"",[e,s]};let Ps=0;const Fe=()=>++Ps;async function St(...e){const[s,n,r,a]=e,o=z({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{});let i=o.populateCache;const c=o.rollbackOnError;let f=o.optimisticData;const h=m=>typeof c=="function"?c(m):c!==!1,j=o.throwOnError;if(F(n)){const m=n,g=[],E=s.keys();for(const y of E)!/^\$(inf|sub)\$/.test(y)&&m(s.get(y)._k)&&g.push(y);return Promise.all(g.map(d))}return d(n);async function d(m){const[g]=We(m);if(!g)return;const[E,y]=Et(s,g),[D,ie,l,de]=U.get(s),Q=()=>{const k=D[g];return(F(o.revalidate)?o.revalidate(E().data,m):o.revalidate!==!1)&&(delete l[g],delete de[g],k&&k[0])?k[0](yt).then(()=>E().data):E().data};if(e.length<3)return Q();let S=r,A,V=!1;const J=Fe();ie[g]=[J,0];const v=!u(f),Y=E(),M=Y.data,Z=Y._c,H=u(Z)?M:Z;if(v&&(f=F(f)?f(H,M):f,y({data:f,_c:H})),F(S))try{S=S(H)}catch(k){A=k,V=!0}if(S&&bt(S))if(S=await S.catch(k=>{A=k,V=!0}),J!==ie[g][0]){if(V)throw A;return S}else V&&v&&h(A)&&(i=!0,y({data:H,_c:R}));if(i&&!V)if(F(i)){const k=i(S,H);y({data:k,error:R,_c:R})}else y({data:S,error:R,_c:R});if(ie[g][1]=Fe(),Promise.resolve(Q()).then(()=>{y({_c:R})}),V){if(j)throw A;return}return S}}const ft=(e,s)=>{for(const n in e)e[n][0]&&e[n][0](s)},qs=(e,s)=>{if(!U.has(e)){const n=z(As,s),r=Object.create(null),a=St.bind(R,e);let o=B;const i=Object.create(null),c=(j,d)=>{const m=i[j]||[];return i[j]=m,m.push(d),()=>m.splice(m.indexOf(d),1)},f=(j,d,m)=>{e.set(j,d);const g=i[j];if(g)for(const E of g)E(d,m)},h=()=>{if(!U.has(e)&&(U.set(e,[r,Object.create(null),Object.create(null),Object.create(null),a,f,c]),!ae)){const j=n.initFocus(setTimeout.bind(R,ft.bind(R,r,jt))),d=n.initReconnect(setTimeout.bind(R,ft.bind(R,r,wt)));o=()=>{j&&j(),d&&d(),U.delete(e)}}};return h(),[e,a,h,o]}return[e,U.get(e)[4]]},Us=(e,s,n,r,a)=>{const o=n.errorRetryCount,i=a.retryCount,c=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!u(o)&&i>o||setTimeout(r,c,a)},Bs=Ie,[Tt,Ws]=qs(new Map),zs=z({onLoadingSlow:B,onSuccess:B,onError:B,onErrorRetry:Us,onDiscarded:B,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ut?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:ut?5e3:3e3,compare:Bs,isPaused:()=>!1,cache:Tt,mutate:Ws,fallback:{}},$s),Hs=(e,s)=>{const n=z(e,s);if(s){const{use:r,fallback:a}=e,{use:o,fallback:i}=s;r&&o&&(n.use=r.concat(o)),a&&i&&(n.fallback=z(a,i))}return n},Gs=p.createContext({}),Ks="$inf$",Nt=le&&window.__SWR_DEVTOOLS_USE__,Xs=Nt?window.__SWR_DEVTOOLS_USE__:[],Qs=()=>{Nt&&(window.__SWR_DEVTOOLS_REACT__=Pe)},Js=e=>F(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Ys=()=>{const e=p.useContext(Gs);return p.useMemo(()=>z(zs,e),[e])},Zs=e=>(s,n,r)=>e(s,n&&((...o)=>{const[i]=We(s),[,,,c]=U.get(Tt);if(i.startsWith(Ks))return n(...o);const f=c[i];return u(f)?n(...o):(delete c[i],f)}),r),en=Xs.concat(Zs),tn=e=>function(...n){const r=Ys(),[a,o,i]=Js(n),c=Hs(r,i);let f=e;const{use:h}=c,j=(h||[]).concat(en);for(let d=j.length;d--;)f=j[d](f);return f(a,o||c.fetcher||null,c)},sn=(e,s,n)=>{const r=s[e]||(s[e]=[]);return r.push(n),()=>{const a=r.indexOf(n);a>=0&&(r[a]=r[r.length-1],r.pop())}};Qs();const Ce=Pe.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(s=>{e.status="fulfilled",e.value=s},s=>{e.status="rejected",e.reason=s}),e}}),De={dedupe:!0},ht=Promise.resolve(R),nn=(e,s,n)=>{const{cache:r,compare:a,suspense:o,fallbackData:i,revalidateOnMount:c,revalidateIfStale:f,refreshInterval:h,refreshWhenHidden:j,refreshWhenOffline:d,keepPreviousData:m,strictServerPrefetchWarning:g}=n,[E,y,D,ie]=U.get(r),[l,de]=We(e),Q=p.useRef(!1),S=p.useRef(!1),A=p.useRef(l),V=p.useRef(s),J=p.useRef(n),v=()=>J.current,Y=()=>v().isVisible()&&v().isOnline(),[M,Z,H,k]=Et(r,l),ee=p.useRef({}).current,ue=u(i)?u(n.fallback)?R:n.fallback[l]:i,ze=(x,_)=>{for(const b in ee){const w=b;if(w==="data"){if(!a(x[w],_[w])&&(!u(x[w])||!a(he,_[w])))return!1}else if(_[w]!==x[w])return!1}return!0},He=p.useMemo(()=>{const x=!l||!s?!1:u(c)?v().isPaused()||o?!1:f!==!1:c,_=C=>{const P=z(C);return delete P._k,x?{isValidating:!0,isLoading:!0,...P}:P},b=M(),w=k(),$=_(b),ne=b===w?$:_(w);let T=$;return[()=>{const C=_(M());return ze(C,T)?(T.data=C.data,T.isLoading=C.isLoading,T.isValidating=C.isValidating,T.error=C.error,T):(T=C,C)},()=>ne]},[r,l]),te=ot.useSyncExternalStore(p.useCallback(x=>H(l,(_,b)=>{ze(b,_)||x()}),[r,l]),He[0],He[1]),Ge=!Q.current,Rt=E[l]&&E[l].length>0,se=te.data,G=u(se)?ue&&bt(ue)?Ce(ue):ue:se,fe=te.error,ge=p.useRef(G),he=m?u(se)?u(ge.current)?G:ge.current:se:G,K=l&&u(G),Ct=!ae&&ot.useSyncExternalStore(()=>B,()=>!1,()=>!0);g&&Ct&&!o&&K&&console.warn(`Missing pre-initiated data for serialized key "${l}" during server-side rendering. Data fethcing should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);const Ke=Rt&&!u(fe)?!1:Ge&&!u(c)?c:v().isPaused()?!1:o?u(G)?!1:f:u(G)||f,Xe=!!(l&&s&&Ge&&Ke),Dt=u(te.isValidating)?Xe:te.isValidating,Ot=u(te.isLoading)?Xe:te.isLoading,oe=p.useCallback(async x=>{const _=V.current;if(!l||!_||S.current||v().isPaused())return!1;let b,w,$=!0;const ne=x||{},T=!D[l]||!ne.dedupe,C=()=>dt?!S.current&&l===A.current&&Q.current:l===A.current,P={isValidating:!1,isLoading:!1},Je=()=>{Z(P)},Ye=()=>{const L=D[l];L&&L[1]===w&&delete D[l]},Ze={isValidating:!0};u(M().data)&&(Ze.isLoading=!0);try{if(T&&(Z(Ze),n.loadingTimeout&&u(M().data)&&setTimeout(()=>{$&&C()&&v().onLoadingSlow(l,n)},n.loadingTimeout),D[l]=[_(de),Fe()]),[b,w]=D[l],b=await b,T&&setTimeout(Ye,n.dedupingInterval),!D[l]||D[l][1]!==w)return T&&C()&&v().onDiscarded(l),!1;P.error=R;const L=y[l];if(!u(L)&&(w<=L[0]||w<=L[1]||L[1]===0))return Je(),T&&C()&&v().onDiscarded(l),!1;const q=M().data;P.data=a(q,b)?q:b,T&&C()&&v().onSuccess(b,l,n)}catch(L){Ye();const q=v(),{shouldRetryOnError:ve}=q;q.isPaused()||(P.error=L,T&&C()&&(q.onError(L,l,q),(ve===!0||F(ve)&&ve(L))&&(!v().revalidateOnFocus||!v().revalidateOnReconnect||Y())&&q.onErrorRetry(L,l,q,It=>{const _e=E[l];_e&&_e[0]&&_e[0](ct,It)},{retryCount:(ne.retryCount||0)+1,dedupe:!0})))}return $=!1,Je(),!0},[l,r]),Qe=p.useCallback((...x)=>St(r,A.current,...x),[]);if(Te(()=>{V.current=s,J.current=n,u(se)||(ge.current=se)}),Te(()=>{if(!l)return;const x=oe.bind(R,De);let _=0;v().revalidateOnFocus&&(_=Date.now()+v().focusThrottleInterval);const w=sn(l,E,($,ne={})=>{if($==jt){const T=Date.now();v().revalidateOnFocus&&T>_&&Y()&&(_=T+v().focusThrottleInterval,x())}else if($==wt)v().revalidateOnReconnect&&Y()&&x();else{if($==yt)return oe();if($==ct)return oe(ne)}});return S.current=!1,A.current=l,Q.current=!0,Z({_k:de}),Ke&&(D[l]||(u(G)||ae?x():Vs(x))),()=>{S.current=!0,w()}},[l]),Te(()=>{let x;function _(){const w=F(h)?h(M().data):h;w&&x!==-1&&(x=setTimeout(b,w))}function b(){!M().error&&(j||v().isVisible())&&(d||v().isOnline())?oe(De).then(_):_()}return _(),()=>{x&&(clearTimeout(x),x=-1)}},[h,j,d,l]),p.useDebugValue(he),o){if(!dt&&ae&&K)throw new Error("Fallback data is required when using Suspense in SSR.");K&&(V.current=s,J.current=n,S.current=!1);const x=ie[l],_=!u(x)&&K?Qe(x):ht;if(Ce(_),!u(fe)&&K)throw fe;const b=K?oe(De):ht;!u(he)&&K&&(b.status="fulfilled",b.value=!0),Ce(b)}return{mutate:Qe,get data(){return ee.data=!0,he},get error(){return ee.error=!0,fe},get isValidating(){return ee.isValidating=!0,Dt},get isLoading(){return ee.isLoading=!0,Ot}}},mt=tn(nn);class rn extends Error{constructor({message:s,status:n,data:r}){super(s),this.name="TwitterApiError",this.status=n,this.data=r}}const an=mt.default||mt,on="https://react-tweet.vercel.app";async function cn([e,s]){const n=await fetch(e,s),r=await n.json();if(n.ok)return r.data||null;throw new rn({message:`Failed to fetch tweet at "${e}" with "${n.status}".`,data:r,status:n.status})}const ln=(e,s,n)=>{const{isLoading:r,data:a,error:o}=an(()=>s||e?[s||e&&`${on}/api/tweet/${e}`,n]:null,cn,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||a===void 0&&!o),data:a,error:o}},dn=({id:e,apiUrl:s,fallback:n=t.jsx(Ts,{}),components:r,fetchOptions:a,onError:o})=>{const{data:i,error:c,isLoading:f}=ln(e,s,a);if(f)return n;if(c||!i){const h=r?.TweetNotFound||Ss;return t.jsx(h,{error:o?o(c):c})}return t.jsx(Es,{tweet:i,components:r})};function un({tweetId:e}){const[s,n]=p.useState(!1),r=Vt();p.useEffect(()=>{n(!0)},[]);const a=r?"dark":"light";return s?t.jsx("div",{className:"not-prose my-6 flex justify-center","data-theme":a,children:t.jsx(dn,{id:e})}):t.jsx("output",{className:"my-6 flex justify-center","aria-busy":"true","aria-label":"正在加载 Tweet",children:t.jsxs("div",{className:"w-full max-w-[550px] animate-pulse rounded-xl bg-muted/50 p-4",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-muted"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 w-32 rounded bg-muted"}),t.jsx("div",{className:"h-3 w-24 rounded bg-muted"})]})]}),t.jsx("div",{className:"mt-4 h-20 rounded bg-muted"})]})})}function En(){const[e,s]=p.useState([]);return p.useEffect(()=>{const n=document.querySelectorAll("[data-tweet-embed]"),r=[];n.forEach(a=>{const o=a.getAttribute("data-tweet-id");o&&a.getAttribute("data-hydrated")!=="true"&&(r.push({element:a,tweetId:o}),a.setAttribute("data-hydrated","true"))}),s(r)},[]),t.jsx(t.Fragment,{children:e.map(({element:n,tweetId:r})=>At.createPortal(t.jsx(Lt,{fallbackRender:a=>t.jsx(kt,{...a,title:"TweetEmbed Error"}),children:t.jsx(un,{tweetId:r})}),n))})}export{En as EmbedHydrator};
