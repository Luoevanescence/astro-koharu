import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{c as S}from"./utils.BpMRZbEX.js";import{u as p}from"./index.CTdVSFIz.js";import{c as H,o as N,t as a,a as E}from"./christmas.VEPmLfjO.js";import{r}from"./index.D6whbu08.js";import{u as L}from"./use-reduced-motion.BKjon5lW.js";import{u as W}from"./use-motion-value.-w1ZE3rh.js";import{u as T}from"./use-transform.DOZiGUF0.js";import{A as x}from"./index.s74VRsaB.js";import{m as i}from"./proxy.C2vk4wBE.js";import"./site-config.BAbVgF_m.js";import"./site.a4jwyKQn.js";import"./index.3whys8t3.js";import"./_commonjsHelpers.CqkleIqs.js";const G=40,D=110,h=72,u=80;function I(){return t.jsx("div",{className:"pointer-events-none absolute top-10 left-1/2 z-100 -translate-x-1/2 -translate-y-[15%] cursor-none drop-shadow",children:t.jsxs("svg",{width:"60",height:"50",viewBox:"0 0 60 50",className:"overflow-visible","aria-hidden":"true",children:[t.jsx("defs",{children:t.jsxs("radialGradient",{id:"bow-red-grad",cx:"30%",cy:"30%",r:"80%",children:[t.jsx("stop",{offset:"0%",stopColor:"#ff5252"}),t.jsx("stop",{offset:"60%",stopColor:"#d32f2f"}),t.jsx("stop",{offset:"100%",stopColor:"#8c1c1c"})]})}),t.jsxs("g",{transform:"translate(30, 20)",children:[t.jsx("path",{d:"M-5 0 L-15 25 L-10 28 L0 5 Z",fill:"#b71c1c"}),t.jsx("path",{d:"M5 0 L15 25 L10 28 L0 5 Z",fill:"#b71c1c"}),t.jsx("path",{d:"M-5 0 Q-12 15 -12 25 L-5 10 Z",fill:"#ef5350",opacity:"0.8"}),t.jsx("path",{d:"M5 0 Q12 15 12 25 L5 10 Z",fill:"#ef5350",opacity:"0.8"})]}),t.jsx("path",{d:"M30 22 C 15 22, 5 5, 30 20 Z",fill:"url(#bow-red-grad)",stroke:"#7f1d1d",strokeWidth:"0.5"}),t.jsx("path",{d:"M30 22 C 45 22, 55 5, 30 20 Z",fill:"url(#bow-red-grad)",stroke:"#7f1d1d",strokeWidth:"0.5"}),t.jsx("path",{d:"M30 21 C 20 22, 10 15, 30 19",fill:"none",stroke:"rgba(0,0,0,0.1)",strokeWidth:"2"}),t.jsx("path",{d:"M30 21 C 40 22, 50 15, 30 19",fill:"none",stroke:"rgba(0,0,0,0.1)",strokeWidth:"2"}),t.jsx("circle",{cx:"30",cy:"21",r:"5",fill:"#ffd700",stroke:"#b8860b",strokeWidth:"1"}),t.jsx("circle",{cx:"30",cy:"21",r:"3",fill:"none",stroke:"#fff",strokeWidth:"1",opacity:"0.4"})]})})}function O(){return t.jsxs("g",{fill:"none",stroke:"#ffd700",strokeWidth:"1.2",opacity:"0.8",children:[t.jsx("path",{d:"M50 35 L50 85 M25 60 L75 60",strokeWidth:"0.5",opacity:"0.3"}),t.jsx("g",{transform:"translate(50, 60) scale(0.9)",children:t.jsx("path",{d:"M0 -12 V12 M-10 -6 L10 6 M-10 6 L10 -6",strokeWidth:"1.5"})}),t.jsx("circle",{cx:"35",cy:"45",r:"1.5",fill:"#fff",stroke:"none",opacity:"0.6"}),t.jsx("circle",{cx:"65",cy:"45",r:"1.5",fill:"#fff",stroke:"none",opacity:"0.6"}),t.jsx("circle",{cx:"50",cy:"80",r:"1.5",fill:"#fff",stroke:"none",opacity:"0.6"})]})}function A({isEnabled:e}){return t.jsxs("svg",{viewBox:"0 0 100 110",className:"size-full overflow-visible drop-shadow-lg","aria-hidden":"true",children:[t.jsxs("defs",{children:[t.jsxs("radialGradient",{id:"ornament-red",cx:"35%",cy:"35%",r:"65%",children:[t.jsx("stop",{offset:"0%",stopColor:"#ff8a80"}),t.jsx("stop",{offset:"40%",stopColor:"#ef5350"}),t.jsx("stop",{offset:"100%",stopColor:"#c62828"})]}),t.jsxs("radialGradient",{id:"ornament-silver",cx:"35%",cy:"35%",r:"65%",children:[t.jsx("stop",{offset:"0%",stopColor:"#f5f5f5"}),t.jsx("stop",{offset:"40%",stopColor:"#e0e0e0"}),t.jsx("stop",{offset:"100%",stopColor:"#616161"})]}),t.jsxs("linearGradient",{id:"cap-gold",x1:"0",y1:"0",x2:"1",y2:"0",children:[t.jsx("stop",{offset:"0%",stopColor:"#daa520"}),t.jsx("stop",{offset:"50%",stopColor:"#ffd700"}),t.jsx("stop",{offset:"100%",stopColor:"#b8860b"})]})]}),t.jsx("path",{d:"M50 0 L50 12",stroke:"#eab308",strokeWidth:"2"}),t.jsx("rect",{x:"42",y:"10",width:"16",height:"10",rx:"2",fill:"url(#cap-gold)",stroke:"#b8860b",strokeWidth:"0.5"}),t.jsx("path",{d:"M42 14 H58 M42 17 H58",stroke:"#856404",strokeWidth:"0.5",opacity:"0.6"}),t.jsx("circle",{cx:"50",cy:"6",r:"4",fill:"none",stroke:"#ffd700",strokeWidth:"2"}),t.jsxs("g",{className:"transition-[fill,stroke] duration-500 ease-out",children:[t.jsx("circle",{cx:"50",cy:"60",r:"38",fill:e?"url(#ornament-red)":"url(#ornament-silver)",stroke:e?"#b71c1c":"#757575",strokeWidth:"0.5"}),t.jsx("circle",{cx:"50",cy:"60",r:"38",fill:"black",fillOpacity:"0.1",pointerEvents:"none"}),t.jsx("g",{className:"origin-center transition-[opacity,transform] duration-300 ease-out",style:{opacity:e?1:0,transform:e?"scale(1)":"scale(0.95)"},children:t.jsx(O,{})}),!e&&t.jsx("g",{opacity:"0.5",children:t.jsx("text",{x:"50",y:"65",fontSize:"30",textAnchor:"middle",fill:"#9e9e9e",fontFamily:"sans-serif",style:{userSelect:"none"},children:"❄"})}),t.jsx("ellipse",{cx:"35",cy:"45",rx:"10",ry:"6",transform:"rotate(-45 35 45)",fill:"white",opacity:"0.4"}),t.jsx("circle",{cx:"32",cy:"40",r:"2",fill:"white",opacity:"0.9"})]})]})}function R(){return typeof document>"u"?{enabled:!0,ornamentHidden:!1}:{enabled:document.documentElement.classList.contains("christmas"),ornamentHidden:localStorage.getItem("christmas-ornament-hidden")==="true"}}function $(){const e=p(H),m=p(N),j=L(),[y,l]=r.useState(!1),[g,c]=r.useState(!1),[d,b]=r.useState(!1),[f]=r.useState(R),s=d?e:f.enabled,k=d?!m:!f.ornamentHidden;r.useEffect(()=>{b(!0)},[]);const n=W(0),w=T(n,o=>u+Math.max(0,o)),v=()=>{l(!1),n.get()>G&&(s?E():a())},C=()=>a(),M=o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),a())};return t.jsx(x,{children:k&&t.jsxs(i.div,{className:"fixed top-0 right-0 tablet:right-12 z-90 flex w-[100px] justify-center lg:right-40",initial:{opacity:0,y:-50},animate:{opacity:s?1:.5,y:0},whileHover:{opacity:1},exit:{opacity:0,y:-50},transition:{duration:.3,ease:"easeOut"},children:[t.jsx(I,{}),t.jsx(i.div,{className:"pointer-events-none absolute top-0 z-99 w-[2px] origin-top bg-linear-to-b from-yellow-700 via-yellow-500 to-yellow-400 will-change-[height]",style:{height:w}}),t.jsxs(i.button,{className:S("absolute cursor-grab touch-none select-none will-change-transform active:cursor-grabbing","rounded-full outline-none focus-visible:ring-4 focus-visible:ring-yellow-400/50"),style:{width:h,height:h,top:u,y:n},drag:j?!1:"y",dragConstraints:{top:0,bottom:D},dragElastic:.2,dragSnapToOrigin:!0,onDragStart:()=>l(!0),onDragEnd:v,onHoverStart:()=>c(!0),onHoverEnd:()=>c(!1),onClick:C,onKeyDown:M,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":s?"关闭圣诞模式":"开启圣诞模式","aria-pressed":s,type:"button",children:[t.jsx("div",{className:"pointer-events-none -mt-2 size-full",children:t.jsx(A,{isEnabled:s})}),t.jsx(x,{children:(y||g)&&t.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:30},exit:{opacity:0},className:"pointer-events-none absolute top-1/2 left-1/2 -translate-x-1/2",children:t.jsx("div",{className:"whitespace-nowrap rounded-full border border-white/10 bg-red-950/90 px-3 py-1 font-medium text-[10px] text-white shadow-md",children:s?"下拉关闭":"下拉开启"})})})]})]})})}export{$ as ChristmasOrnamentToggle};
