import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as d,b as R}from"./index.D6whbu08.js";import{G as S,h as C}from"./index.02QQZwjl.js";import{a as V,c as B}from"./utils.BpMRZbEX.js";import{c as A}from"./index.TWhk7goS.js";const O=d.createContext(null),x={didCatch:!1,error:null};let y=class extends d.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=x}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,s,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];(r=(s=this.props).onReset)===null||r===void 0||r.call(s,{args:o,reason:"imperative-api"}),this.setState(x)}}componentDidCatch(t,r){var s,n;(s=(n=this.props).onError)===null||s===void 0||s.call(n,t,r)}componentDidUpdate(t,r){const{didCatch:s}=this.state,{resetKeys:n}=this.props;if(s&&r.error!==null&&I(t.resetKeys,n)){var o,i;(o=(i=this.props).onReset)===null||o===void 0||o.call(i,{next:n,prev:t.resetKeys,reason:"keys"}),this.setState(x)}}render(){const{children:t,fallbackRender:r,FallbackComponent:s,fallback:n}=this.props,{didCatch:o,error:i}=this.state;let c=t;if(o){const u={error:i,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(u);else if(s)c=d.createElement(s,u);else if(n!==void 0)c=n;else throw i}return d.createElement(O.Provider,{value:{didCatch:o,error:i,resetErrorBoundary:this.resetErrorBoundary}},c)}};function I(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,s)=>!Object.is(r,t[s]))}function N(e){return S({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(e)}var P=Symbol.for("react.lazy"),p=R[" use ".trim().toString()];function T(e){return typeof e=="object"&&e!==null&&"then"in e}function k(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===P&&"_payload"in e&&T(e._payload)}function F(e){const t=_(e),r=d.forwardRef((s,n)=>{let{children:o,...i}=s;k(o)&&typeof p=="function"&&(o=p(o._payload));const c=d.Children.toArray(o),u=c.find(W);if(u){const l=u.props.children,f=c.map(m=>m===u?d.Children.count(l)>1?d.Children.only(null):d.isValidElement(l)?l.props.children:null:m);return a.jsx(t,{...i,ref:n,children:d.isValidElement(l)?d.cloneElement(l,void 0,f):null})}return a.jsx(t,{...i,ref:n,children:o})});return r.displayName=`${e}.Slot`,r}var L=F("Slot");function _(e){const t=d.forwardRef((r,s)=>{let{children:n,...o}=r;if(k(n)&&typeof p=="function"&&(n=p(n._payload)),d.isValidElement(n)){const i=K(n),c=H(o,n.props);return n.type!==d.Fragment&&(c.ref=s?A(s,i):i),d.cloneElement(n,c)}return d.Children.count(n)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var D=Symbol("radix.slottable");function W(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===D}function H(e,t){const r={...t};for(const s in t){const n=e[s],o=t[s];/^on[A-Z]/.test(s)?n&&o?r[s]=(...c)=>{const u=o(...c);return n(...c),u}:n&&(r[s]=n):s==="style"?r[s]={...n,...o}:s==="className"&&(r[s]=[n,o].filter(Boolean).join(" "))}return{...e,...r}}function K(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const j=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,E=V,M=(e,t)=>r=>{var s;if(t?.variants==null)return E(e,r?.class,r?.className);const{variants:n,defaultVariants:o}=t,i=Object.keys(n).map(l=>{const f=r?.[l],m=o?.[l];if(f===null)return null;const h=j(f)||j(m);return n[l][h]}),c=r&&Object.entries(r).reduce((l,f)=>{let[m,h]=f;return h===void 0||(l[m]=h),l},{}),u=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((l,f)=>{let{class:m,className:h,...w}=f;return Object.entries(w).every(z=>{let[b,g]=z;return Array.isArray(g)?g.includes({...o,...c}[b]):{...o,...c}[b]===g})?[...l,m,h]:l},[]);return E(e,i,u,r?.class,r?.className)},Z=M("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium text-sm ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-background/70",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline","gradient-shoka":"bg-gradient-shoka-button text-primary-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=d.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...n},o)=>{const i=s?L:"button";return a.jsx(i,{className:B(Z({variant:t,size:r,className:e})),ref:o,...n})});v.displayName="Button";const G=({error:e,resetErrorBoundary:t,title:r="Oops, something went wrong!",showDetails:s=!1,actions:n})=>a.jsxs("div",{className:"flex w-full flex-col items-center gap-4 rounded-lg border border-red-200 bg-red-50 p-6 dark:border-red-900/50 dark:bg-red-950/20",children:[a.jsxs("div",{className:"flex-center gap-2 font-medium text-lg text-red-700 dark:text-red-400",children:[a.jsx("svg",{className:"size-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r]}),s&&e?.message&&a.jsxs("div",{className:"w-full rounded-md bg-red-100 p-3 font-mono text-red-800 text-sm dark:bg-red-900/30 dark:text-red-300",children:[a.jsxs("p",{className:"font-semibold",children:["Error: ",e.message]}),!1]}),a.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3",children:n??a.jsxs(a.Fragment,{children:[a.jsxs(v,{variant:"outline",size:"sm",onClick:t,className:"gap-1.5",children:[a.jsx(C,{className:"size-4"}),"Try Again"]}),a.jsxs("a",{href:"https://github.com/cosZone/astro-koharu/issues/new",target:"_blank",className:"flex-center gap-1.5 text-blue-600 text-sm transition-colors hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",rel:"noopener",children:[a.jsx(N,{className:"size-4"}),"Report Issue"]})]})})]}),X=({error:e,resetErrorBoundary:t})=>a.jsxs("div",{className:"flex-center-y gap-2 text-lg text-red-600 dark:text-red-400",children:[a.jsxs("span",{children:["Error",e?.message?`: ${e.message}`:""]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[a.jsxs(v,{variant:"outline",size:"sm",onClick:t,className:"gap-1.5",children:[a.jsx(C,{className:"size-4"}),"Try Again"]}),a.jsx("a",{href:"https://github.com/cosZone/astro-koharu/issues/new",target:"_blank",rel:"noopener",children:a.jsxs(v,{variant:"outline",size:"sm",onClick:t,className:"gap-1.5",children:[a.jsx(N,{className:"size-4"}),"Report Issue"]})})]})]}),ee=({children:e,fallback:t,fallbackRender:r,FallbackComponent:s,onError:n,onReset:o,resetKeys:i})=>{const u={onError:(l,f)=>{console.error("[ErrorBoundary]",l,f),n?.(l,f)},onReset:o,resetKeys:i};return t!==void 0?a.jsx(y,{...u,fallback:t,children:e}):r!==void 0?a.jsx(y,{...u,fallbackRender:r,children:e}):a.jsx(y,{...u,FallbackComponent:s??G,children:e})};export{ee as E,X as I,G as a};
